<html>
  <head>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
    <meta content="utf-8" http-equiv="encoding">
    <title>CS460 Assignment 2</title>
    <style>
      body {
        background-color: black;
        color: white; /* font color */
        font-family: sans-serif;
      }

      #logo {
        position: absolute;
        right: 10px;
        top: 10px;
      }
    </style>
    <script type="text/javascript" src="http://get.goXTK.com/xtk_edge.js"></script>

    <script type="text/javascript">
      window.onload = function() {
        r = new X.renderer3D();
        r.init();
        tree();
        lightsloop();
        r.render();
    }

    // functions
    // light
      function light(x, y, h, a) {
        c = new X.cube();
        var lightColors=new Array([1, 0, 0],[1, 1, 0],[0, 0, 1])
        c.color = lightColors[a];
        c.center = [x*23, y*23, h*23];
        r.add(c);
      }

      function lights(a) {
        light(-2, 4, 3, a%3);
        light(2, 4, 3, a%3);
        light(-4, 2, 3, a%3);
        light(4, 2, 3, a%3);
        light(-4, -2, 3, a%3);
        light(4, -2, 3, a%3);
        light(-2, -4, 3, a%3);
        light(2, -4, 3, a%3);

        light(3, 0, 5, (a+1)%3);
        light(-3, 0, 5, (a+1)%3);
        light(0, -3, 5, (a+1)%3);
        light(0, 3, 5, (a+1)%3);

        light(0, 0, 8, (a+2)%3);
      }

      function lightsloop(){
        setInterval(function() {
          lights(0);
        }, 3000);
        setTimeout(function() {
          setInterval(function() {
            lights(1);}, 3000)
        }, 1000);
        setTimeout(function() {
          setInterval(function() {
            lights(2);}, 3000)
        }, 2000);}

    // tree
      function layer(l1, l2, h) {
        var a = Math.floor(l1/2);
        var b = Math.floor(l2/2);
        for (var x=-a; x<a+1; x++) {
          for (var y=-a; y<a+1; y++) {
            if ((x<-b||x>b)&&(y<-b||y>b)) {}
            else {
              c = new X.cube();
              var g = 0.7+0.1*Math.cos(x)+0.1*Math.cos(y)+0.45*Math.log(0.35*h+0.4)-0.1;
              c.color = [0, g, 0];
              c.center = [x*23, y*23, h*23];
              r.add(c);}}}}

      function tree() {
        layer(3, 3, 0);
        layer(3, 1, 1);
        layer(9, 9, 2);
        layer(9, 7, 3);
        layer(7, 5, 4);
        layer(7, 3, 5);
        layer(3, 3, 6);
        layer(3, 1, 7);
        layer(1, 1, 8);}
    </script>
  </head>
  
  <body>
    <h1>CS460 Assignment 2</h1>
    <div id="logo"><img style="height:60px" src="gfx/cs460.png"></div>
  </body>
</html>
